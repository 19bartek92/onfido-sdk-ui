!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Onfido=t():e.Onfido=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(2),n(13),n(5),n(30),n(27),n(7),n(11)],r=s,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t,n,r,o,i,a,s,c){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=u(i),d=u(a),p=u(c),f={},h={token:"some token",buttonId:"onfido-button",containerId:"onfido-mount",onReady:null,onDocumentCapture:null,onFaceCapture:null,onComplete:null};f.init=function(e){(0,s.route)("/",!0);var t=(0,p["default"])({},h,e);t.mount=document.getElementById(t.containerId),l["default"].create(t),(0,n.render)((0,n.h)(r.Provider,{store:o.store},(0,n.h)(d["default"],{options:t})),t.mount)},o.events.once("documentCapture",function(e){console.log(e)}),o.events.once("faceCapture",function(e){console.log(e)}),o.events.once("ready",function(){console.log("ready")}),t["default"]=f,e.exports=t["default"]})},function(e,t){"use strict";var n=!1,r={disableLog:function(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,e.minVersion=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),e.minVersion=31;else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),e.minVersion=38;else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1),e.minVersion=602}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),e.minVersion=10547}return e.minVersion>e.version&&r.log("Browser: "+e.browser+" Version: "+e.version+" < minimum supported version: "+e.minVersion+"\n some things might not work!"),e}};e.exports={log:r.log,disableLog:r.disableLog,browserDetails:r.detectBrowser(),extractVersion:r.extractVersion}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){this.nodeName=e,this.attributes=t,this.children=n}function t(e,t){for(var n in t)se.call(t,n)&&(e[n]=t[n]);return e}function n(e){var t={};for(var n in e)t[n]=e[n];return t}function r(e,t){return t=t||{},function(n){return se.call(t,n)?t[n]:t[n]=e(n)}}function o(e,t){for(var n=t.split("."),r=0;n.length>r&&e;r++)e=e[n[r]];return e}function i(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t}function a(e){var t="";for(var n in e){var r=e[n];ce(r)||(t&&(t+=" "),t+=le(n),t+=": ",t+=r,"number"!=typeof r||oe[n]||(t+="px"),t+=";")}return t}function s(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function c(e,t,n){var r=e[t];r&&!ae(r)&&(e[t]=n(r))}function u(e,t,n){return l(ve,e,t,n)}function l(e,t,n,r,o){return e[t]?e[t](n,r,o):void 0}function d(e,t){do l(e,t);while(e=e._component)}function p(t,n){var r=arguments.length,o=n&&n.children,i=void 0,a=void 0,s=void 0;if(o&&(delete n.children,3>r))return p(t,n,o);for(var c=2;r>c;c++){var l=arguments[c];if(!ue(l)){i||(i=[]),l.join?a=l:(a=me,a[0]=l);for(var d=0;a.length>d;d++){var f=a[d],h=!(ue(f)||f instanceof e);h&&(f+=""),h&&s?i[i.length-1]+=f:ue(f)||i.push(f),s=h}}}var v=new e(t,n||void 0,i||void 0);return u("vnode",v),v}function f(e,t,n){var r=t.split("."),i=r[0],a=r.length;return function(t){var s,c=this,u=e.state,l=u,d=void 0,p=void 0;if(ae(n)?(d=o(t,n),ce(d)&&(c=c._component)&&(d=o(c,n))):d=(c.nodeName+c.type).match(/^input(check|rad)/i)?c.checked:c.value,ie(d)&&(d=d.call(c)),a>1){for(p=0;a-1>p;p++)l=l[r[p]]||(l[r[p]]={});l[r[p]]=d,d=u[i]}e.setState((s={},s[i]=d,s))}}function h(e){1===ye.push(e)&&(ve.debounceRendering||he)(v)}function v(){if(ye.length){var e=ye,t=void 0;for(ye=ge,ge=e;t=e.pop();)t._dirty&&W(t)}}function m(e){var t=e.nodeName;return ie(t)&&!(t.prototype&&t.prototype.render)}function y(e,t){return e.nodeName(R(e),t||Z)||Q}function g(e){return e[ne]||(e[ne]={})}function b(e){return e.nodeType}function w(e,t){for(var n=t.length,r=n>2,o=r?document.createDocumentFragment():e,i=0;n>i;i++)o.appendChild(t[i]);r&&e.appendChild(o)}function C(e){var t=e.parentNode;t&&t.removeChild(e)}function _(e,t,n,r){if("type"!==t&&"style"!==t&&t in e)return e[t];var o=e[ne];return r!==!1&&o&&se.call(o,t)?o[t]:"class"===t?e.className:"style"===t?e.style.cssText:n}function P(e,t,n){"class"===t?e.className=n||"":"style"===t?e.style.cssText=n||"":"dangerouslySetInnerHTML"===t?n&&n.__html&&(e.innerHTML=n.__html):"key"===t||t in e&&"type"!==t?(e[t]=n,ue(n)&&e.removeAttribute(t)):O(e,t,n),g(e)[t]=n}function O(e,t,n){if("on"!==t.substring(0,2)){var r=typeof n;ue(n)?e.removeAttribute(t):"function"!==r&&"object"!==r&&e.setAttribute(t,n)}else{var o=be(t),i=e._listeners||(e._listeners={}),a=i[o]?n?null:"remove":"add";a&&e[a+"EventListener"](o,E),i[o]=n}}function E(e){var t=this._listeners[be(e.type)];return t?t.call(this,u("event",e)||e):void 0}function T(e){return e[ne]||S(e)||Z}function S(e){var t=e.attributes;return t&&t.getNamedItem?x(t):t}function x(e){for(var t=void 0,n=e.length;n--;){var r=e[n];t||(t={}),t[r.name]=r.value}return t}function k(e,t){if(m(t))return!0;var n=t.nodeName;return ie(n)?e._componentConstructor===n:3===b(e)?ae(t):de(e.nodeName)===n}function R(e){var t=n(e.attributes),r=e.children;r&&(t.children=r);var o=e.nodeName.defaultProps;if(o)for(var i in o)!se.call(o,i)||i in t||(t[i]=o[i]);return t}function j(e){D(e);var t=Ce(e.nodeName),n=we[t];n?n.push(e):we[t]=[e]}function M(e){var t=Ce(e),n=we[t],r=n&&n.pop()||document.createElement(e);return g(r),r}function D(e){C(e),3!==b(e)&&(e[ne]||(e[ne]=S(e)),e._component=e._componentConstructor=null)}function A(e,t,n){for(var r=t.attributes;m(t);)t=y(t,n);if(ie(t.nodeName))return B(e,t,n);if(ae(t)){if(e){var o=b(e);if(3===o)return e[te]=t,e;1===o&&j(e)}return document.createTextNode(t)}var a=e,s=t.nodeName||re;return e?de(e.nodeName)!==s&&(a=M(s),w(a,i(e.childNodes)),I(e)):a=M(s),N(a,t,n),L(a,t),r&&r.ref&&(a[ne].ref=r.ref)(a),a}function N(e,t,n){var r=void 0,o=void 0,i=0,a=e.childNodes.length,s=0;if(a){r=[];for(var c=0;a>c;c++){var u=e.childNodes[c],l=u._component?u._component.__key:_(u,"key");ce(l)?r[s++]=u:(o||(o={}),o[l]=u,i++)}}var p=t.children,f=p&&p.length,h=0;if(f)for(var c=0;f>c;c++){var v=p[c],u=void 0;if(i){var m=v.attributes,l=m&&m.key;!ce(l)&&se.call(o,l)&&(u=o[l],o[l]=null,i--)}if(!u&&s>h)for(var y=h;s>y;y++){var g=r[y];if(g&&k(g,v)){u=g,r[y]=null,y===s-1&&s--,y===h&&h++;break}}if(u=A(u,v,n),e.childNodes[c]!==u){var g=u.parentNode!==e&&u._component,b=e.childNodes[c+1];g&&d(g,"componentWillMount"),b?e.insertBefore(u,b):e.appendChild(u),g&&d(g,"componentDidMount")}}if(i)for(var c in o)se.call(o,c)&&o[c]&&(r[h=s++]=o[c]);s>h&&U(r)}function U(e,t){for(var n=e.length;n--;){var r=e[n];r&&I(r,t)}}function I(e,t){var n=e[ne];n&&l(n,"ref",null);var r=e._component;if(r)H(r,!t);else{if(!t){if(1!==b(e))return void C(e);j(e)}var o=e.childNodes;o&&o.length&&U(o,t)}}function L(e,t){var n=T(e)||Z,r=t.attributes||Z,o=void 0,i=void 0;for(o in n)ce(r[o])&&P(e,o,null);if(r!==Z)for(o in r)se.call(r,o)&&(i=r[o],ce(i)||i==_(e,o)||P(e,o,i))}function F(e){var t=e.constructor.name,n=_e[t];n?n.push(e):_e[t]=[e]}function $(e,t,n){for(var r=_e[e.name],o=r&&r.length,i=void 0,a=0;o>a;a++)if(i=r[a],i.constructor===e){r.splice(a,1);var s=new e(t,n);return s.nextBase=i.base,s}return new e(t,n)}function V(e){e._dirty||(e._dirty=!0,h(e))}function G(e,t,n,r){var o=e._disableRendering;e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,e._disableRendering=!0,r&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.base&&l(e,"componentWillReceiveProps",t,e.context),e.prevProps||(e.prevProps=e.props),e.props=t,e._disableRendering=o,n&&n.render===!1||(n&&n.renderSync||ve.syncComponentUpdates!==!1?W(e):V(e)),l(e,"__ref",e)}function W(e,t){if(!e._disableRendering){var n=void 0,r=void 0,o=e.props,i=e.state,a=e.context,s=e.prevProps||o,c=e.prevState||i,u=e.prevContext||a,p=e.base,f=p||e.nextBase;if(p&&(e.props=s,e.state=c,e.context=u,l(e,"shouldComponentUpdate",o,i,a)===!1?n=!0:l(e,"componentWillUpdate",o,i,a),e.props=o,e.state=i,e.context=a),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!n){r=l(e,"render",o,i,a);var h=r&&r.nodeName,v=e.getChildContext?e.getChildContext():a,m=void 0,y=void 0;if(ie(h)&&h.prototype.render){var g=e._component;g&&g.constructor!==h&&(m=g,g=null);var b=R(r);g?G(g,b,X,v):(g=$(h,b,v),g._parentComponent=e,e._component=g,p&&d(g,"componentWillMount"),G(g,b,J,v),W(g,Y),p&&d(g,"componentDidMount")),y=g.base}else{var w=f;m=e._component,m&&(w=e._component=null),(f||t&&t.build)&&(y=A(w,r||Q,v))}if(f&&y!==f){var C=f.parentNode;C&&y!==C&&C.replaceChild(y,f)}if(m&&H(m,!0),e.base=y,y){for(var _=e,P=e;P=P._parentComponent;)_=P;y._component=_,y._componentConstructor=_.constructor}p&&l(e,"componentDidUpdate",s,c,u)}var O=e._renderCallbacks,E=void 0;if(O)for(;E=O.pop();)E.call(e);return r}}function B(e,t,n){for(var r=e&&e._component,o=e,i=r&&e._componentConstructor===t.nodeName;r&&!i&&(r=r._parentComponent);)i=r.constructor===t.nodeName;return i?(G(r,R(t),X,n),e=r.base):(r&&(H(r,!0),e=o=null),e=q(t,e,n),o&&e!==o&&(o._component=null,I(o))),e}function q(e,t,n){var r=R(e),o=$(e.nodeName,r,n);return t&&!o.base&&(o.base=t),G(o,r,J,n),W(o,Y),o.base}function H(e,t){l(e,"__ref",null),l(e,"componentWillUnmount");var n=e._component;n&&(H(n,t),t=!1);var r=e.base;r&&(t!==!1&&C(r),U(r.childNodes,!0)),t&&(e._parentComponent=null,F(e)),l(e,"componentDidUnmount")}function K(e,t){this._dirty=this._disableRendering=!1,this.prevState=this.prevProps=this.prevContext=this.base=this.nextBase=this._parentComponent=this._component=this.__ref=this.__key=this._linkedStates=this._renderCallbacks=null,this.context=t||{},this.props=e,this.state=l(this,"getInitialState")||{}}function z(e,t,n){var r=n&&n._component&&n._componentConstructor===e.nodeName,o=A(n,e),i=!r&&o._component;return i&&d(i,"componentWillMount"),o.parentNode!==t&&t.appendChild(o),i&&d(i,"componentDidMount"),o}var J={render:!1},X={renderSync:!0},Y={build:!0},Z={},Q="",ee="undefined"!=typeof document,te=!ee||"textContent"in document?"textContent":"nodeValue",ne="undefined"!=typeof Symbol?Symbol["for"]("preactattr"):"__preactattr_",re="undefined",oe={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},ie=function(e){return"function"==typeof e},ae=function(e){return"string"==typeof e},se={}.hasOwnProperty,ce=function(e){return null==e},ue=function(e){return e===!1||null==e},le=r(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}),de=r(function(e){return e.toLowerCase()}),pe=void 0;try{pe=new MessageChannel}catch(fe){}var he=pe?function(e){pe.port1.onmessage=e,pe.port2.postMessage("")}:setTimeout,ve={vnode:function(e){var t=e.attributes;if(t&&!ie(e.nodeName)){var n=t.className;n&&(t["class"]=n,delete t.className),t["class"]&&c(t,"class",s),t.style&&c(t,"style",a)}}},me=[],ye=[],ge=[],be=r(function(e){return e.replace(/^on/i,"").toLowerCase()}),we={},Ce=r(function(e){return e.toUpperCase()}),_e={};t(K.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={}),r=e+"|"+(t||"");return n[r]||(n[r]=f(this,e,t))},setState:function(e,r){var o=this.state;this.prevState||(this.prevState=n(o)),t(o,ie(e)?e(o,this.props):e),r&&(this._renderCallbacks=this._renderCallbacks||[]).push(r),V(this)},forceUpdate:function(){W(this)},render:function(){return null}});var Pe={h:p,Component:K,render:z,rerender:v,options:ve,hooks:ve};return Pe})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEV_SOCKET_URL="\nwss://document-check-staging.onfido.co.uk:9876",t.SOCKET_URL="wss://172.31.72.132:9876",t.XHR_URL="https://api.onfido.com",t.DOCUMENT_CAPTURE="DOCUMENT_CAPTURE",t.FACE_CAPTURE="FACE_CAPTURE",t.SET_TOKEN="SET_TOKEN",t.SET_AUTHENTICATED="SET_AUTHENTICATED",t.SET_WEBSOCKET_SUPPORT="SET_WEBSOCKET_SUPPORT",t.SET_GUM_SUPPORT="SET_GUM_SUPPORT",t.SET_DOCUMENT_CAPTURED="SET_DOCUMENT_CAPTURED",t.SET_FACE_CAPTURED="SET_FACE_CAPTURED"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var o=n(17),i=r(o),a=n(54),s=r(a),c=n(53),u=r(c),l=n(52),d=r(l),p=n(16),f=r(p),h=n(18);r(h),t.createStore=i["default"],t.combineReducers=s["default"],t.bindActionCreators=u["default"],t.applyMiddleware=d["default"],t.compose=f["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.unboundActions=t.events=t.actions=t.store=t.connect=void 0;var o=n(19),i=r(o),a=n(9),s=r(a),c=n(12),u=r(c),l=n(8);t.connect=i["default"],t.store=s["default"],t.actions=l.actions,t.events=u["default"],t.unboundActions=l.unboundActions},function(e,t,n){!function(e,r){r(t,n(44),n(45),n(2))}(this,function(e,t,n,r){"use strict";function o(e,t,n){var o=t._preactCompatRendered;o&&o.parentNode!==t&&(o=null);var i=r.render(e,t,o);return t._preactCompatRendered=i,"function"==typeof n&&n(),i&&i._component}function i(e){var t=e._preactCompatRendered;return t&&t.parentNode===e?(r.render(r.h(x),e,t),!0):!1}function a(e){return function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return s.apply(void 0,[e].concat(n))}}function s(){var e=r.h.apply(void 0,arguments);"svg"===e.nodeName&&(e.nodeName=n),d(e);var t=e.attributes&&e.attributes.ref;return M&&t&&"string"==typeof t&&(e.attributes.ref=l(t,M)),e}function c(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];return s.apply(void 0,[e.nodeName||e.type,p({},e.attributes||e.props||{},t)].concat(r))}function u(e){return e&&(e instanceof k||e.$$typeof===O)}function l(e,t){return t._refProxies[e]||(t._refProxies[e]=function(n){t&&t.refs&&(t.refs[e]=n,null===n&&(delete t._refProxies[e],t=null))})}function d(e){var t=e.attributes;if(t){var n=t.className||t["class"];n&&(t.className=n)}}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];for(var o=0;n.length>o;o++)for(var i in n[o])if(n[o].hasOwnProperty(i)){var a=n[o][i];null!==a&&void 0!==a&&(e[i]=a)}return e}function f(){}function h(e){var t=function(t,n){p(this,e),U.call(this,t,n,T),v(this),g.call(this,t,n)};return e.propTypes&&(t.propTypes=e.propTypes),e.defaultProps&&(t.defaultProps=e.defaultProps),e.getDefaultProps&&(t.defaultProps=e.getDefaultProps()),f.prototype=U.prototype,t.prototype=new f,t.prototype.constructor=t,t.displayName=e.displayName||"Component",t}function v(e){for(var t in e){var n=e[t];"function"!=typeof n||n.__bound||E.hasOwnProperty(t)||((e[t]=n.bind(e)).__bound=!0)}}function m(e,t,n){return"string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t?t.apply(e,n):void 0}function y(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){for(var e=void 0,n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];for(var i=0;t.length>i;i++){var a=m(this,t[i],r);void 0!==a&&(e=a)}return e}}function g(e,t){b.call(this,e,t),this.componentWillReceiveProps=y(this.componentWillReceiveProps||"componentWillReceiveProps",b),this.render=y(w,this.render||"render",C)}function b(e){if(e){var t=e.children;if(t&&1===t.length&&(e.children=t[0],e.children&&"object"==typeof e.children&&(e.children.length=1,e.children[0]=e.children)),S){var n=this.propTypes||this.constructor.propTypes;if(n)for(var r in n)if(n.hasOwnProperty(r)&&"function"==typeof n[r]){var o=n[r](e,r,this.constructor.name,"prop");if(o)throw o}}}}function w(){M=this}function C(){M===this&&(M=null)}t="default"in t?t["default"]:t,n="default"in n?n["default"]:n;var _={};_.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_.createClass=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};var P="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),O="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,E={constructor:1,render:1,shouldComponentUpdate:1,componentWillRecieveProps:1,componentWillUpdate:1,componentDidUpdate:1,componentWillMount:1,componentDidMount:1,componentWillUnmount:1,componentDidUnmount:1},T={},S="undefined"!=typeof process&&process.env&&!1,x=function(){return null},k=r.h("").constructor;k.prototype.$$typeof=O,Object.defineProperty(k.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e}}),Object.defineProperty(k.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e}});for(var R=[],j={map:function(e,t,n){return e=j.toArray(e),n&&n!==e&&(t=t.bind(n)),e.map(t)},forEach:function(e,t,n){e=j.toArray(e),n&&n!==e&&(t=t.bind(n)),e.forEach(t)},count:function(e){return e=j.toArray(e),e.length},only:function(e){if(e=j.toArray(e),1!==e.length)throw Error("Children.only() expects only one child.");return e[0]},toArray:function(e){return Array.isArray&&Array.isArray(e)?e:R.concat(e)}},M=void 0,D={},A=P.length;A--;)D[P[A]]=a(P[A]);var N=function(e){return e.base||e},U=function(e){function t(e,n,r){_.classCallCheck(this,t);var o=_.possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e,n));return o.refs={},o._refProxies={},r!==T&&g.call(o,e,n),o}return _.inherits(t,e),_.createClass(t,[{key:"getDOMNode",value:function(){return this.base}},{key:"isMounted",value:function(){return!!this.base}}]),t}(r.Component),I={DOM:D,PropTypes:t,Children:j,render:o,createClass:h,createFactory:a,createElement:s,cloneElement:c,isValidElement:u,findDOMNode:N,unmountComponentAtNode:i,Component:U};e.DOM=D,e.PropTypes=t,e.Children=j,e.render=o,e.createClass=h,e.createFactory=a,e.createElement=s,e.cloneElement=c,e.isValidElement=u,e.findDOMNode=N,e.unmountComponentAtNode=i,e.Component=U,e["default"]=I})},function(e,t,n){!function(t,r){e.exports=r(n(2))}(this,function(e){"use strict";function t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,o=/(?:\?([^#]*))?(#.*)?$/,i=e.match(o),a={},s=void 0;if(i&&i[1])for(var c=i[1].split("&"),u=0;c.length>u;u++){var l=c[u].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}e=r(e.replace(o,"")),t=r(t||"");for(var p=Math.max(e.length,t.length),u=0;p>u;u++)if(t[u]&&":"===t[u].charAt(0)){var f=t[u].replace(/(^\:|[+*?]+$)/g,""),h=(t[u].match(/[+*?]+$/)||d)[0]||"",v=~h.indexOf("+"),m=~h.indexOf("*"),y=e[u]||"";if(!y&&!m&&(h.indexOf("?")<0||v)){s=!1;break}if(a[f]=decodeURIComponent(y),v||m){a[f]=e.slice(u).map(decodeURIComponent).join("/");break}}else if(t[u]!==e[u]){s=!1;break}return n["default"]!==!0&&s===!1?!1:a}function n(e,t){var n=e.attributes||d,r=t.attributes||d;if(n["default"])return 1;if(r["default"])return-1;var i=o(n.path)-o(r.path);return i||n.path.length-r.path.length}function r(e){return i(e).split("/")}function o(e){return(i(e).match(/\/+/g)||"").length}function i(e){return e.replace(/(^\/+|\/+$)/g,"")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;"string"!=typeof e&&e.url&&(t=e.replace,e=e.url),history&&(t===!0?history.replaceState(null,null,e):history.pushState(null,null,e)),s(e)}function s(e){p.forEach(function(t){return t.routeTo(e)})}function c(){var e="undefined"!=typeof location?location:f;return""+(e.pathname||"")+(e.search||"")}function u(e){return a(this.getAttribute("href")),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1}var l={};l.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},l.objectWithoutProperties=function(e,t){var n={};for(var r in e)t.indexOf(r)<0&&Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},l._extends=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var d={},p=[],f={};"function"==typeof addEventListener&&addEventListener("popstate",function(){return s(c())});var h=function(t){var n=t.children,r=l.objectWithoutProperties(t,["children"]);return e.h("a",l._extends({},r,{onClick:u}),n)},v=function(e){function r(t){l.classCallCheck(this,r),e.call(this),this.state={url:t.url||c()}}return l.inherits(r,e),r.prototype.routeTo=function(e){this.setState({url:e})},r.prototype.componentWillMount=function(){p.push(this)},r.prototype.componentWillUnmount=function(){p.splice(p.indexOf(this),1)},r.prototype.render=function(e,r){var o=e.children,i=e.onChange,a=r.url,s=o.slice().sort(n).filter(function(e){var n=e.attributes,r=n.path,o=t(a,r,n);if(o){n.url=a,n.matches=o;for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);return!0}}),c=this.previousUrl;return a!==c&&(this.previousUrl=a,"function"==typeof i&&i({router:this,url:a,previous:c,active:s,current:s[0]})),s[0]||null},r}(e.Component),m=function(t){var n=t.component,r=t.url,o=t.matches;return e.h(n,{url:r,matches:o})};return v.route=a,v.Router=v,v.Route=m,v.Link=h,v})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.unboundActions=void 0;var i=n(4),a=n(11),s=o(a),c=n(9),u=o(c),l=n(22),d=r(l),p=n(21),f=r(p),h=t.unboundActions=(0,s["default"])({},d,f);t.actions=(0,i.bindActionCreators)(h,u["default"].dispatch)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(25),a=r(i),s=(0,o.createStore)(a["default"],window.devToolsExtension?window.devToolsExtension():void 0);t["default"]=s},function(e,t,n){function r(e){if(!a(e)||p.call(e)!=s||i(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d}var o=n(41),i=n(42),a=n(43),s="[object Object]",c=Object.prototype,u=Function.prototype.toString,l=c.hasOwnProperty,d=u.call(Object),p=c.toString;e.exports=r},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(i){return!1}}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,s=n(e),c=1;arguments.length>c;c++){r=Object(arguments[c]);for(var u in r)o.call(r,u)&&(s[u]=r[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var l=0;a.length>l;l++)i.call(r,a[l])&&(s[a[l]]=r[a[l]])}}return s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=c["default"].getState();if(l(e)&&u.emit("ready"),d(e)){var t=e.documentCaptures;u.emit("documentCapture",{documentCaptures:t})}if(p(e)){var n=e.faceCaptures;u.emit("faceCapture",{faceCaptures:n})}if(d(e)&&p(e)){var r=e.documentCaptures,o=e.faceCaptures;u.emit("complete",{documentCaptures:r,faceCaptures:o})}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),a=r(i),s=n(9),c=r(s),u=new a["default"];c["default"].subscribe(o);var l=function(e){return e.globals.authenticated},d=function(e){return e.globals.hasDocumentCaptured},p=function(e){return e.globals.hasFaceCaptured};t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t.connect=t.Provider=void 0;var o=n(48),i=r(o),a=n(49),s=r(a);t.Provider=i["default"],t.connect=s["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(6);t["default"]=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};var r=function(){var e=t[t.length-1],n=t.slice(0,-1);return{v:function(){return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}}();return"object"==typeof r?r.v:void 0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){function r(){y===m&&(y=m.slice())}function i(){return v}function s(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return r(),y.push(e),function(){if(t){t=!1,r();var n=y.indexOf(e);y.splice(n,1)}}}function l(e){if(!(0,a["default"])(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw Error("Reducers may not dispatch actions.");try{g=!0,v=h(v,e)}finally{g=!1}for(var t=m=y,n=0;t.length>n;n++)t[n]();return e}function d(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");h=e,l({type:u.INIT})}function p(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(i())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[c["default"]]=function(){return this},e}var f;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(o)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var h=e,v=t,m=[],y=m,g=!1;return l({type:u.INIT}),f={dispatch:l,subscribe:s,getState:i,replaceReducer:d},f[c["default"]]=p,f}t.__esModule=!0,t.ActionTypes=void 0,t["default"]=o;var i=n(10),a=r(i),s=n(56),c=r(s),u=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(t){}}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){l(u.supportsWebSockets),d(u.supportsGetUserMedia)}function i(e){if(o(),u.supportsWebSockets){var t=new s["default"];return t.connect(e),t}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var a=n(20),s=r(a),c=n(8),u=n(26),l=c.actions.setWebSocketSupport,d=c.actions.setGumSupport},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),c=o(s),u=n(12),l=(o(u),n(3)),d=r(l),p=n(8),f=p.actions.setDocumentCaptured,h=p.actions.setToken,v=p.actions.setAuthenticated,m=function(){function e(){i(this,e)}return a(e,[{key:"connect",value:function(e){var t=this,n=c["default"].stringify({jwt:e}),r=d.DEV_SOCKET_URL+"?"+n,o=new WebSocket(r);o.onopen=function(){t.socket=o,t.onMessage(),h(e),v(!0)},console.log(o)}},{key:"handleData",value:function(e){(e.is_document||e.has_passport)&&f(!0)}},{key:"onMessage",value:function(){var e=this;this.socket.onmessage=function(t){var n=JSON.parse(t.data);e.handleData(n)}}},{key:"sendMessage",value:function(e){this.socket.send(e)}}]),e}();t["default"]=m},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return{type:s.DOCUMENT_CAPTURE,payload:e}}function i(e){return{type:s.FACE_CAPTURE,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.documentCapture=o,t.faceCapture=i;var a=n(3),s=r(a)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return{type:d.SET_TOKEN,payload:e}}function i(e){return{type:d.SET_WEBSOCKET_SUPPORT,payload:e}}function a(e){return{type:d.SET_DOCUMENT_CAPTURED,payload:e}}function s(e){return{type:d.SET_FACE_CAPTURED,payload:e}}function c(e){return{type:d.SET_AUTHENTICATED,payload:e}}function u(e){return{
type:d.SET_GUM_SUPPORT,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setToken=o,t.setWebSocketSupport=i,t.setDocumentCaptured=a,t.setFaceCaptured=s,t.setAuthenticated=c,t.setGumSupport=u;var l=n(3),d=r(l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case c.DOCUMENT_CAPTURE:return[t.payload].concat(o(e));default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case c.FACE_CAPTURE:return[t.payload].concat(o(e));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.documentCaptures=i,t.faceCaptures=a;var s=n(3),c=r(s)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case u.SET_TOKEN:return e=(0,s["default"])({},e,{jwt:t.payload});case u.SET_AUTHENTICATED:return e=(0,s["default"])({},e,{authenticated:t.payload});case u.SET_WEBSOCKET_SUPPORT:return e=(0,s["default"])({},e,{supportsWebSockets:t.payload});case u.SET_GUM_SUPPORT:return e=(0,s["default"])({},e,{supportsGetUserMedia:t.payload});case u.SET_DOCUMENT_CAPTURED:return e=(0,s["default"])({},e,{hasDocumentCaptured:t.payload});case u.SET_FACE_CAPTURED:return e=(0,s["default"])({},e,{hasFaceCaptured:t.payload});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var a=n(11),s=o(a),c=n(3),u=r(c),l={jwt:null,authenticated:!1,supportsWebSockets:!1,supportsGetUserMedia:!1,hasDocumentCaptured:!1,hasFaceCaptured:!1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(23),a=n(24),s=r(a);t["default"]=(0,o.combineReducers)({globals:s["default"],documentCaptures:i.documentCaptures,faceCaptures:i.faceCaptures})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsGetUserMedia="getUserMedia"in navigator||"webkitGetUserMedia"in navigator||"mozGetUserMedia"in navigator||"msGetUserMedia"in navigator,t.supportsWebSockets="WebSocket"in window},function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(2),n(7),n(4),n(13),n(5),n(29),n(28),n(37)],r=s,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t,n,r,o,i,a,s,c,u){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){return g({documentCaptures:e.documentCaptures,faceCaptures:e.faceCaptures},e.globals)}function v(e){return{actions:(0,o.bindActionCreators)(a.unboundActions,e)}}Object.defineProperty(t,"__esModule",{value:!0});var m=l(s),y=l(c),g=(l(u),Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),b=function(e){function t(){var n,r,o;d(this,t);for(var i=arguments.length,a=Array(i),s=0;i>s;s++)a[s]=arguments[s];return n=r=p(this,e.call.apply(e,[this].concat(a))),r.handleRoute=function(e){r.currentUrl=e.url},o=n,p(r,o)}return f(t,e),t.prototype.componentWillMount=function(){var e=this.props.options,t=e.token;this.socket=(0,a.connect)(t)},t.prototype.render=function(){return(0,n.h)("div",{id:"app",className:"onfido-verify"},(0,n.h)(r.Router,{onChange:this.handleRoute},(0,n.h)(m["default"],g({path:"/"},this.state,this.props)),(0,n.h)(y["default"],g({path:"/verify/:method",socket:this.socket},this.state,this.props))))},t}(n.Component);t["default"]=(0,i.connect)(h,v)(b),e.exports=t["default"]})},function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(2),n(7),n(38),n(47),n(35),n(5),n(31),n(32),n(33)],r=s,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t,n,r,o,i,a,s,c,u,l){"use strict";function d(e){return e&&e.__esModule?e:{"default":e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var v=d(o),m=d(i),y=d(a),g=d(l),b=function(){return(0,n.h)("span",{className:"onfido-countdown"})},w=function(e){function t(){var n,r,o;p(this,t);for(var i=arguments.length,a=Array(i),s=0;i>s;s++)a[s]=arguments[s];return n=r=f(this,e.call.apply(e,[this].concat(a))),r.capture={once:function(){var e={useEasing:!1,useGrouping:!1},t=new y["default"](r.countdown,3,0,0,3,e);t.start(function(){r.video.pause(),r.captureImage()})},start:function(){r.interval=setInterval(function(){return r.captureImage()},2e3)},stop:function(){clearInterval(r.interval)}},o=n,f(r,o)}return h(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props.method,n=e.hasDocumentCaptured,o=e.hasFaceCaptured,i=n&&"document"===t,a=o&&"face"===t;(i||a)&&(0,r.route)("/",!0)},t.prototype.captureImage=function(){if(this.video){var e=this.dimensions.ratio,t=this.createBase64(this.canvas,960,960/e);this.handleImage(t,!1)}},t.prototype.createBase64=function(e,t,n){this.ctx=e.getContext("2d"),e.width=t,e.height=n,this.ctx.drawImage(this.video,0,0,t,n);var r=e.toDataURL("image/webp");return r},t.prototype.handleFiles=function(e){var t=this,n={maxWidth:960};e.map(function(e){(0,g["default"])(e.preview,function(e){s.events.emit("imageLoaded",e)},n)}),s.events.once("imageLoaded",function(e){t.handleImage(e,!0)})},t.prototype.handleImage=function(e,t){var n=this.props,r=n.method,o=n.actions,i=n.socket,a=(0,c.filterImage)(e);if(a){var s={id:1,messageType:r,image:a,isFile:t};switch(r){case"document":return function(){i.sendMessage(JSON.stringify(s)),o.documentCapture(s)}();case"face":return function(){o.faceCapture(s),setTimeout(function(){return o.setFaceCaptured(!0)},1e3)}();default:return!1}}},t.prototype.createStream=function(e){var t=this,n=this.props,r=n.hasDocumentCaptured,o=n.method,i=this.video,a=this.capture;i.src=window.URL.createObjectURL(e),i.onloadedmetadata=function(e){var n=t.video,r=n.clientWidth,o=n.clientHeight;t.dimensions={clientWidth:r,clientHeight:o,ratio:r/o},i.play()},"document"!==o||r||a.start()},t.prototype.componentDidMount=function(){var e=this;this.canvas=document.createElement("canvas"),(0,v["default"])(function(t,n){t?console.log("failed"):(e.createStream(n),e.bindEvents())})},t.prototype.bindEvents=function(){var e=this;s.events.on("onBeforeOpen",function(){return e.capture.start()}),s.events.on("onBeforeClose",function(){return e.capture.stop()})},t.prototype.componentWillUnmount=function(){this.capture.stop()},t.prototype.renderCaptureButton=function(){return(0,n.h)("button",{id:"onfido-capture",className:"btn",onClick:this.capture.once},"Take photo")},t.prototype.renderPreviews=function(){var e=this.props,t=e.documentCaptures,r=e.faceCaptures,o=e.method;switch(o){case"document":return t.map(function(e){return(0,n.h)("img",{src:e.base64.src})});case"face":return r.map(function(e){return(0,n.h)("img",{src:e.base64.src})});default:return!1}},t.prototype.renderUploader=function(){return(0,n.h)("div",{className:"onfido-upload"},this.renderPreviews(),(0,n.h)(m["default"],{onDrop:this.handleFiles.bind(this),multiple:!1},(0,n.h)("div",null,"Try dropping some files here, or click to select files to upload.")))},t.prototype.renderVideo=function(){var e=this;return(0,n.h)("video",{id:"onfido-video",className:"onfido-video",autoplay:"autoplay",muted:!0,ref:function(t){e.video=t}})},t.prototype.renderNav=function(){return(0,n.h)("div",{"class":"onfido-controls"},(0,n.h)(r.Link,{href:"/",id:"onfido-back",className:"onfido-back"},(0,n.h)("span",{className:"sans-serif"},"←")," Back"),(0,n.h)("a",{rel:"modal:close",className:"onfido-close white"},"× Close"))},t.prototype.render=function(){var e=this,t=this.props,r=t.method,o=t.supportsGetUserMedia,i=o&&"face"===r;return(0,n.h)("div",{id:"onfido-camera",className:"onfido-camera"},this.renderNav(),i&&this.renderCaptureButton(),i&&(0,n.h)(b,{ref:function(t){e.countdown=t}}),o&&this.renderVideo()||this.renderUploader())},t}(n.Component);t["default"]=w,e.exports=t["default"]})},function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(2),n(7),n(34)],r=s,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t,n,r,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var s=i(o),c=function(){function e(){a(this,e)}return e.prototype.renderState=function(e,t){return e.complete?(0,n.h)("span",{"class":"btn btn-complete"},"Complete"):(0,n.h)(r.Link,{href:t,className:"onfido-method-selector"},e.title)},e.prototype.renderMethod=function(e,t){var r,o=(0,s["default"])((r={"onfido-method":!0,"onfido-method--double":!0},r["onfido-method-"+e.type]=!0,r)),i="verify/"+e.route;return(0,n.h)("div",{className:o},(0,n.h)("h1",{"class":"onfido-step"},t+1),(0,n.h)("p",null,e.hint),this.renderState(e,i))},e.prototype.renderComplete=function(){return(0,n.h)("div",{className:"onfido-method"},(0,n.h)("h1",null,"Complete"),(0,n.h)("p",null,"Everything is complete, thank you. You can now close this window."),(0,n.h)("a",{className:"btn"},"Complete"))},e.prototype.render=function(){var e=this.props,t=e.hasDocumentCaptured,r=e.hasFaceCaptured,o=t&&r,i=[{route:"document",type:"documentCapture",hint:"First, we need to capture a document via your camera or file upload.",title:"Document capture",complete:t},{route:"face",type:"faceCapture",hint:"Next, we need you to take a photo of your face to match with the document.",title:"Face capture",complete:r}];return(0,n.h)("div",{className:"onfido-methods"},(0,n.h)("a",{rel:"modal:close",className:"onfido-close"},"× Close"),o&&this.renderComplete()||i.map(this.renderMethod.bind(this)))},e}();t["default"]=c,e.exports=t["default"]})},function(e,t,n){var r,o,i;!function(a,s){o=[e,t,n(58),n(5)],r=s,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};o.template="\n  <div class='onfido-modal-inner'>\n    <div class='onfido-modal-content'></div>\n  </div>\n",o.create=function(e){var t=document.createElement("div");t.className="onfido-modal",t.innerHTML=o.template,e.mount.parentNode.insertBefore(t,e.mount.nextSibling),r.events.emit("modalMounted",e)},o.options={modal:".onfido-modal",modalInner:".onfido-modal-inner",modalContent:".onfido-modal-content",onOpen:function(){r.events.emit("onOpen")},onClose:function(){r.events.emit("onClose")},onBeforeOpen:function(){r.events.emit("onBeforeOpen")},onBeforeClose:function(){r.events.emit("onBeforeClose")}},r.events.on("modalMounted",function(e){var t=new n.VanillaModal(o.options),i=document.getElementById(e.buttonId);i.disabled=!1;var a="#"+e.mount.getAttribute("id");i.addEventListener("click",function(){t.open(a)}),r.events.on("onOpen",function(){return e.mount.style.display="block"}),r.events.on("onClose",function(){return e.mount.style.display="none"})}),t["default"]=o,e.exports=t["default"]})},function(e,t,n){var r,o,i;!function(n,a){o=[t],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";function t(e){switch(typeof e){case"string":return e.split(",")[1];case"object":return e;default:return}}Object.defineProperty(e,"__esModule",{value:!0}),e.filterImage=t})},function(e,t,n){var r,o,i;!function(n,a){o=[t],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";function t(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t}Object.defineProperty(e,"__esModule",{value:!0}),e.convertImageToCanvas=t})},function(e,t,n){var r;!function(o){"use strict";var i=function(e,t,n){var r,o,a=document.createElement("img");if(a.onerror=t,a.onload=function(){!o||n&&n.noRevoke||i.revokeObjectURL(o),t&&t(i.scale(a,n))},i.isInstanceOf("Blob",e)||i.isInstanceOf("File",e))r=o=i.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;r=e,n&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin)}return r?(a.src=r,a):i.readFile(e,function(e){var n=e.target;n&&n.result?a.src=n.result:t&&t(e)})},a=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;i.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},i.transformCoordinates=function(){},i.getTransformedOptions=function(e,t){var n,r,o,i,a=t.aspectRatio;if(!a)return t;n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n.crop=!0,o=e.naturalWidth||e.width,i=e.naturalHeight||e.height,o/i>a?(n.maxWidth=i*a,n.maxHeight=i):(n.maxWidth=o,n.maxHeight=o/a),n},i.renderImageToCanvas=function(e,t,n,r,o,i,a,s,c,u){return e.getContext("2d").drawImage(t,n,r,o,i,a,s,c,u),e},i.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},i.scale=function(e,t){function n(){var e=Math.max((s||w)/w,(c||C)/C);e>1&&(w*=e,C*=e)}function r(){var e=Math.min((o||w)/w,(a||C)/C);1>e&&(w*=e,C*=e)}t=t||{};var o,a,s,c,u,l,d,p,f,h,v,m=document.createElement("canvas"),y=e.getContext||i.hasCanvasOption(t)&&m.getContext,g=e.naturalWidth||e.width,b=e.naturalHeight||e.height,w=g,C=b;if(y&&(t=i.getTransformedOptions(e,t),d=t.left||0,p=t.top||0,t.sourceWidth?(u=t.sourceWidth,void 0!==t.right&&void 0===t.left&&(d=g-u-t.right)):u=g-d-(t.right||0),t.sourceHeight?(l=t.sourceHeight,void 0!==t.bottom&&void 0===t.top&&(p=b-l-t.bottom)):l=b-p-(t.bottom||0),w=u,C=l),o=t.maxWidth,a=t.maxHeight,s=t.minWidth,c=t.minHeight,y&&o&&a&&t.crop?(w=o,C=a,v=u/l-o/a,0>v?(l=a*u/o,void 0===t.top&&void 0===t.bottom&&(p=(b-l)/2)):v>0&&(u=o*l/a,void 0===t.left&&void 0===t.right&&(d=(g-u)/2))):((t.contain||t.cover)&&(s=o=o||s,c=a=a||c),t.cover?(r(),n()):(n(),r())),y){if(f=t.pixelRatio,f>1&&(m.style.width=w+"px",m.style.height=C+"px",w*=f,C*=f,m.getContext("2d").scale(f,f)),h=t.downsamplingRatio,h>0&&1>h&&u>w&&l>C)for(;u*h>w;)m.width=u*h,m.height=l*h,i.renderImageToCanvas(m,e,d,p,u,l,0,0,m.width,m.height),u=m.width,l=m.height,e=document.createElement("canvas"),e.width=u,e.height=l,i.renderImageToCanvas(e,m,0,0,u,l,0,0,u,l);return m.width=w,m.height=C,i.transformCoordinates(m,t),i.renderImageToCanvas(m,e,d,p,u,l,0,0,w,C)}return e.width=w,e.height=C,e},i.createObjectURL=function(e){return a?a.createObjectURL(e):!1},i.revokeObjectURL=function(e){return a?a.revokeObjectURL(e):!1},i.readFile=function(e,t,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=t,n=n||"readAsDataURL",r[n])return r[n](e),r}return!1},r=function(){return i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(window)},function(e,t,n){var r,o;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e=[],t=0;arguments.length>t;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],o=function(){return n}.apply(t,r),!(void 0!==o&&(e.exports=o)))}()},function(e,t,n){var r,o;!function(i,a){r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n){var r=function(e,t,n,r,o,i){for(var a=0,s=["webkit","moz","ms","o"],c=0;s.length>c&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[s[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[c]+"CancelAnimationFrame"]||window[s[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),o=window.setTimeout(function(){e(n+r)},r);return a=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)});var u=this;u.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:null,formattingFn:null};for(var l in i)i.hasOwnProperty(l)&&(u.options[l]=i[l]);""===u.options.separator&&(u.options.useGrouping=!1),u.options.prefix||(u.options.prefix=""),u.options.suffix||(u.options.suffix=""),u.d="string"==typeof e?document.getElementById(e):e,u.startVal=+t,u.endVal=+n,u.countDown=u.startVal>u.endVal,u.frameVal=u.startVal,u.decimals=Math.max(0,r||0),u.dec=Math.pow(10,u.decimals),u.duration=1e3*+o||2e3,u.formatNumber=function(e){e=e.toFixed(u.decimals),e+="";var t,n,r,o;if(t=e.split("."),n=t[0],r=t.length>1?u.options.decimal+t[1]:"",o=/(\d+)(\d{3})/,u.options.useGrouping)for(;o.test(n);)n=n.replace(o,"$1"+u.options.separator+"$2");return u.options.prefix+n+r+u.options.suffix},u.easeOutExpo=function(e,t,n,r){return n*(-Math.pow(2,-10*e/r)+1)*1024/1023+t},u.easingFn=u.options.easingFn?u.options.easingFn:u.easeOutExpo,u.formattingFn=u.options.formattingFn?u.options.formattingFn:u.formatNumber,u.version=function(){return"1.7.1"},u.printValue=function(e){var t=u.formattingFn(e);"INPUT"===u.d.tagName?this.d.value=t:"text"===u.d.tagName||"tspan"===u.d.tagName?this.d.textContent=t:this.d.innerHTML=t},u.count=function(e){u.startTime||(u.startTime=e),u.timestamp=e;var t=e-u.startTime;u.remaining=u.duration-t,u.frameVal=u.options.useEasing?u.countDown?u.startVal-u.easingFn(t,0,u.startVal-u.endVal,u.duration):u.easingFn(t,u.startVal,u.endVal-u.startVal,u.duration):u.countDown?u.startVal-(u.startVal-u.endVal)*(t/u.duration):u.startVal+(u.endVal-u.startVal)*(t/u.duration),u.frameVal=u.countDown?u.endVal>u.frameVal?u.endVal:u.frameVal:u.frameVal>u.endVal?u.endVal:u.frameVal,u.frameVal=Math.round(u.frameVal*u.dec)/u.dec,u.printValue(u.frameVal),u.duration>t?u.rAF=requestAnimationFrame(u.count):u.callback&&u.callback()},u.start=function(e){return u.callback=e,u.rAF=requestAnimationFrame(u.count),!1},u.pauseResume=function(){u.paused?(u.paused=!1,delete u.startTime,u.duration=u.remaining,u.startVal=u.frameVal,requestAnimationFrame(u.count)):(u.paused=!0,cancelAnimationFrame(u.rAF))},u.reset=function(){u.paused=!1,delete u.startTime,u.startVal=t,cancelAnimationFrame(u.rAF),u.printValue(u.startVal)},u.update=function(e){cancelAnimationFrame(u.rAF),u.paused=!1,delete u.startTime,u.startVal=u.frameVal,u.endVal=+e,u.countDown=u.startVal>u.endVal,u.rAF=requestAnimationFrame(u.count)},u.printValue(u.startVal)};return r})},function(e,t,n){var r;!function(o){function i(){this._events={},this._conf&&a.call(this,this._conf)}function a(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function s(e){this._events={},this.newListener=!1,a.call(this,e)}function c(e,t,n,r){if(!n)return[];var o,i,a,s,u,l,d,p=[],f=t.length,h=t[r],v=t[r+1];if(r===f&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(o=0,i=n._listeners.length;i>o;o++)e&&e.push(n._listeners[o]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(p=p.concat(c(e,t,n[a],r+1)));return p}if("**"===h){d=r+1===f||r+2===f&&"*"===v,d&&n._listeners&&(p=p.concat(c(e,t,n,f)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!d&&(p=p.concat(c(e,t,n[a],f))),p=p.concat(c(e,t,n[a],r))):p=p.concat(a===v?c(e,t,n[a],r+2):c(e,t,n[a],r)));return p}p=p.concat(c(e,t,n[h],r+1))}if(s=n["*"],s&&c(e,t,s,r+1),u=n["**"])if(f>r){u._listeners&&c(e,t,u,f);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?c(e,t,u[a],r+2):a===h?c(e,t,u[a],r+1):(l={},l[a]=u[a],c(e,t,{"**":l},r+1)))}else u._listeners?c(e,t,u,f):u["*"]&&u["*"]._listeners&&c(e,t,u["*"],f);return p}function u(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;r>n+1;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,a=e.shift();a;){if(i[a]||(i[a]={}),i=i[a],0===e.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,t];else if(l(i._listeners)&&(i._listeners.push(t),!i._listeners.warned)){var s=d;o!==this._events.maxListeners&&(s=this._events.maxListeners),s>0&&i._listeners.length>s&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace&&console.trace())}}else i._listeners=t;return!0}a=e.shift()}return!0}var l=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},d=10;s.EventEmitter2=s,s.prototype.delimiter=".",s.prototype.setMaxListeners=function(e){this._events||i.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},s.prototype.event="",s.prototype.once=function(e,t){return this.many(e,1,t),this},s.prototype.many=function(e,t,n){function r(){0===--t&&o.off(e,r),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw Error("many only accepts instances of Function");return r._origin=n,this.on(e,r),o},s.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,o,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(t=Array(s),o=1;s>o;o++)t[o]=arguments[o];for(r=0,n=a.length;n>r;r++)switch(this.event=e,s){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}}if(this.wildcard){a=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();c.call(this,a,u,this.listenerTree,0)}else{if(a=this._events[e],"function"==typeof a){switch(this.event=e,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=Array(s-1),o=1;s>o;o++)t[o-1]=arguments[o];a.apply(this,t)}return!0}a&&(a=a.slice())}if(a&&a.length){if(s>3)for(t=Array(s-1),o=1;s>o;o++)t[o-1]=arguments[o];for(r=0,n=a.length;n>r;r++)switch(this.event=e,s){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,o,a,s=[],u=arguments.length;if(this._all){if(u>3)for(t=Array(u),o=1;u>o;o++)t[o]=arguments[o];for(r=0,n=this._all.length;n>r;r++)switch(this.event=e,u){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();c.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,u){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=Array(u-1),o=1;u>o;o++)t[o-1]=arguments[o];s.push(a.apply(this,t))}else if(a&&a.length){if(u>3)for(t=Array(u-1),o=1;u>o;o++)t[o-1]=arguments[o];for(r=0,n=a.length;n>r;r++)switch(this.event=e,u){case 1:s.push(a[r].call(this));break;case 2:s.push(a[r].call(this,arguments[1]));break;case 3:s.push(a[r].call(this,arguments[1],arguments[2]));break;default:s.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},s.prototype.on=function(e,t){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof t)throw Error("on only accepts instances of Function");if(this._events||i.call(this),this.emit("newListener",e,t),this.wildcard)return u.call(this,e,t),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],t];else if(l(this._events[e])&&(this._events[e].push(t),!this._events[e].warned)){var n=d;o!==this._events.maxListeners&&(n=this._events.maxListeners),n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace&&console.trace())}}else this._events[e]=t;return this},s.prototype.onAny=function(e){if("function"!=typeof e)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(e,t){function n(e){if(e!==o){var t=Object.keys(e);for(var r in t){var i=t[r],a=e[i];a instanceof Function||"object"!=typeof a||(Object.keys(a).length>0&&n(e[i]),0===Object.keys(a).length&&delete e[i])}}}if("function"!=typeof t)throw Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();i=c.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;i.length>s;s++){var u=i[s];if(r=u._listeners,l(r)){for(var d=-1,p=0,f=r.length;f>p;p++)if(r[p]===t||r[p].listener&&r[p].listener===t||r[p]._origin&&r[p]._origin===t){d=p;break}if(0>d)continue;return this.wildcard?u._listeners.splice(d,1):this._events[e].splice(d,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},s.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;r>n;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;r>n;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||i.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=c.call(this,null,t,this.listenerTree,0),r=0;n.length>r;r++){var o=n[r];o._listeners=null}else{if(!this._events||!this._events[e])return this;this._events[e]=null}return this},s.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return c.call(this,t,n,this.listenerTree,0),t}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),l(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},s.prototype.listenersAny=function(){return this._all?this._all:[]},r=function(){return s}.call(t,n,t,e),!(r!==o&&(e.exports=r))}()},function(e,t){},function(e,t,n){n(59),e.exports=function(e,t){var n,r=2===arguments.length,o={video:!0,audio:!0},i="PermissionDeniedError",a="PERMISSION_DENIED",s="ConstraintNotSatisfiedError";return r||(t=e,e=o),"undefined"!=typeof navigator&&navigator.getUserMedia?e.audio||e.video?(localStorage&&"true"===localStorage.useFirefoxFakeDevice&&(e.fake=!0),void navigator.mediaDevices.getUserMedia(e).then(function(e){t(null,e)})["catch"](function(e){var n;"string"==typeof e?(n=Error("MediaStreamError"),n.name=e===i||e===a?i:s):(n=e,n.name||(e.name=n[i]?i:s)),t(n)})):(n=Error("MediaStreamError"),n.name="NoMediaRequestedError",setTimeout(function(){t(n)},0)):(n=Error("MediaStreamError"),n.name="NotSupportedError",setTimeout(function(){t(n)},0))}},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var o=Object.getOwnPropertyNames(t),i=0;o.length>i;++i)if(!n[o[i]]&&!r[o[i]])try{e[o[i]]=t[o[i]]}catch(a){}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,s){if(!e){var c;if(void 0===t)c=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,a,s],l=0;c=Error(t.replace(/%s/g,function(){return u[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};e.exports=r},function(e,t){function n(e){return r(Object(e))}var r=Object.getPrototypeOf;e.exports=n},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){var r,o,i;!function(n,a){o=[t,e],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t){"use strict";function n(e){var t=e&&(_&&e[_]||e[P]);return"function"==typeof t?t:void 0}function r(e){function t(t,n,r,o,i,a){if(o=o||O,a=a||r,null==n[r]){var s=w[i];return t?Error("Required "+s+" `"+a+"` was not specified in "+("`"+o+"`.")):null}return e(n,r,o,i,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function o(e){function t(t,n,r,o,i){var a=t[n],s=v(a);if(s!==e){var c=w[o],u=m(a);return Error("Invalid "+c+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return r(t)}function i(){return r(C.thatReturns(null))}function a(e){function t(t,n,r,o,i){var a=t[n];if(!Array.isArray(a)){var s=w[o],c=v(a);return Error("Invalid "+s+" `"+i+"` of type "+("`"+c+"` supplied to `"+r+"`, expected an array."))}for(var u=0;a.length>u;u++){var l=e(a,u,r,o,i+"["+u+"]");if(l instanceof Error)return l}return null}return r(t)}function s(){function e(e,t,n,r,o){if(!b.isValidElement(e[t])){var i=w[r];return Error("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return r(e)}function c(e){function t(t,n,r,o,i){if(!(t[n]instanceof e)){var a=w[o],s=e.name||O,c=y(t[n]);return Error("Invalid "+a+" `"+i+"` of type "+("`"+c+"` supplied to `"+r+"`, expected ")+("instance of `"+s+"`."))}return null}return r(t)}function u(e){function t(t,n,r,o,i){for(var a=t[n],s=0;e.length>s;s++)if(a===e[s])return null;var c=w[o],u=JSON.stringify(e);return Error("Invalid "+c+" `"+i+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+u+"."))}return r(Array.isArray(e)?t:function(){return Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function l(e){function t(t,n,r,o,i){var a=t[n],s=v(a);if("object"!==s){var c=w[o];return Error("Invalid "+c+" `"+i+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an object."))}for(var u in a)if(a.hasOwnProperty(u)){var l=e(a,u,r,o,i+"."+u);if(l instanceof Error)return l}return null}return r(t)}function d(e){function t(t,n,r,o,i){for(var a=0;e.length>a;a++){var s=e[a];if(null==s(t,n,r,o,i))return null}var c=w[o];return Error("Invalid "+c+" `"+i+"` supplied to "+("`"+r+"`."))}return r(Array.isArray(e)?t:function(){return Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function p(){function e(e,t,n,r,o){if(!h(e[t])){var i=w[r];return Error("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function f(e){function t(t,n,r,o,i){var a=t[n],s=v(a);if("object"!==s){var c=w[o];return Error("Invalid "+c+" `"+i+"` of type `"+s+"` "+("supplied to `"+r+"`, expected `object`."))}for(var u in e){var l=e[u];if(l){var d=l(a,u,r,o,i+"."+u);if(d)return d}}return null}return r(t)}function h(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(h);if(null===e||b.isValidElement(e))return!0;var t=n(e);if(!t)return!1;var r,o=t.call(e);if(t!==e.entries){for(;!(r=o.next()).done;)if(!h(r.value))return!1}else for(;!(r=o.next()).done;){var i=r.value;if(i&&!h(i[1]))return!1}return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function m(e){var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function y(e){return e.constructor&&e.constructor.name?e.constructor.name:O}var g="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103,b={};b.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===g};var w={prop:"prop",context:"context",childContext:"child context"},C={thatReturns:function(e){return function(){return e}}},_="function"==typeof Symbol&&Symbol.iterator,P="@@iterator",O="<<anonymous>>",E={array:o("array"),bool:o("boolean"),func:o("function"),number:o("number"),object:o("object"),string:o("string"),any:i(),arrayOf:a,element:s(),instanceOf:c,node:p(),objectOf:l,oneOf:u,oneOfType:d,shape:f};t.exports=E})},function(e,t,n){var r,o,i;!function(a,s){o=[t,e,n(2)],r=s,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)<0&&Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=v[t];n===!1?Object.defineProperty(e,t,g(t)):s(e,t)}function s(e,t){try{Object.defineProperty(e,t,g(t)),v[t]=!1}catch(n){if(!v[t]){var r=e.nodeName+": "+n;v[t]=r,!m&&"undefined"!=typeof console&&console.warn&&(m=!0,console.warn("Error overwriting some SVG properties.",{errors:v}))}}}function c(e){return function(){e.componentDidUpdate(),e=null}}var u=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="undefined"!=typeof document&&!!document.createElement,d=["viewBox"],p={className:"class"},f={},h=!1;l&&!function(){var e=document.createElement("div"),t=document.createElement;document.createElement=function(n){if(h||"svg"===n){var r=document.createElementNS("http://www.w3.org/2000/svg",n);for(var o in r)!~d.indexOf(o)&&o in e&&!p.hasOwnProperty(o)||a(r,o);return r}return t.call(document,n)}}();var v={},m=!1,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e(n)}},g=y(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p[e]||e;return function(){return{set:function(e){null===e||void 0===e?this.removeAttribute(t):this.setAttribute(t,e)},get:function(){return this.getAttribute(t)}}}()}),b=function(e){function t(){o(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.componentWillUpdate=function(){h=!0},t.prototype.componentDidUpdate=function(){if(h=!1,this.base)for(var e in this.props)(~d.indexOf(e)||v.hasOwnProperty(e)&&v[e]!==!1)&&this.base.setAttribute(e,this.props[e])},t.prototype.render=function(e){var t=e.children,o=r(e,["children"]);this.hasRendered||(this.hasRendered=h=!0,this.setState(f,c(this)));for(var i in o)(~d.indexOf(i)||v.hasOwnProperty(i)&&v[i]!==!1)&&delete o[i];return n.h("svg",u({version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o),t)},t}(n.Component);t.exports=b})},function(e,t,n){"use strict";var r=n(55);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("="),r=n.shift(),o=n.length>0?n.join("="):void 0;return r=decodeURIComponent(r),o=void 0===o?null:decodeURIComponent(o),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o,e},{}):{})},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var n=e[t];return void 0===n?"":null===n?t:Array.isArray(n)?n.slice().sort().map(function(e){return r(t)+"="+r(e)}).join("&"):r(t)+"="+r(n)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){!function(t,r){e.exports=r(n(6))}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)<0&&Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),d=r(l),p=n(2),f=r(p),h="undefined"!=typeof document&&document&&document.createElement?"multiple"in document.createElement("input"):!0,v=function(e){function t(e,n){i(this,t);var r=a(this,Object.getPrototypeOf(t).call(this,e,n));return r.onClick=r.onClick.bind(r),r.onDragEnter=r.onDragEnter.bind(r),r.onDragLeave=r.onDragLeave.bind(r),r.onDragOver=r.onDragOver.bind(r),r.onDrop=r.onDrop.bind(r),r.state={isDragActive:!1},r}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.enterCounter=0}},{key:"onDragEnter",value:function(e){e.preventDefault(),++this.enterCounter;var t=e.dataTransfer&&e.dataTransfer.items?e.dataTransfer.items:[],n=this.allFilesAccepted(Array.prototype.slice.call(t));this.setState({isDragActive:n,isDragReject:!n}),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){return e.preventDefault(),e.stopPropagation(),!1}},{key:"onDragLeave",value:function(e){e.preventDefault(),--this.enterCounter>0||(this.setState({isDragActive:!1,isDragReject:!1}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){e.preventDefault(),this.enterCounter=0,this.setState({isDragActive:!1,isDragReject:!1});for(var t=e.dataTransfer?e.dataTransfer.files:e.target.files,n=this.props.multiple?t.length:Math.min(t.length,1),r=[],o=0;n>o;o++){var i=t[o];this.props.disablePreview||(i.preview=window.URL.createObjectURL(i)),r.push(i)}this.props.onDrop&&this.props.onDrop.call(this,r,e),this.allFilesAccepted(r)?this.props.onDropAccepted&&this.props.onDropAccepted.call(this,r,e):this.props.onDropRejected&&this.props.onDropRejected.call(this,r,e)}},{key:"onClick",value:function(){this.props.disableClick||this.open()}},{key:"allFilesAccepted",value:function(e){var t=this;return e.every(function(e){return(0,d["default"])(e,t.props.accept)})}},{key:"open",value:function(){this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this,t=this.props,n=t.accept,r=t.activeClassName,i=t.inputProps,a=t.multiple,s=t.name,u=t.rejectClassName,l=o(t,["accept","activeClassName","inputProps","multiple","name","rejectClassName"]),d=l.activeStyle,p=l.className,v=l.rejectStyle,m=l.style,y=o(l,["activeStyle","className","rejectStyle","style"]),g=this.state,b=g.isDragActive,w=g.isDragReject;p=p||"",b&&r&&(p+=" "+r),w&&u&&(p+=" "+u),p||m||d||v||(m={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},d={borderStyle:"solid",backgroundColor:"#eee"},v={borderStyle:"solid",backgroundColor:"#ffdddd"});var C=void 0;C=d&&b?c({},m,d):v&&w?c({},m,v):c({},m);var _={accept:n,type:"file",style:{display:"none"},multiple:h&&a,ref:function(t){return e.fileInputEl=t},onChange:this.onDrop};return s&&s.length&&(_.name=s),f["default"].createElement("div",c({className:p,style:C},y,{onClick:this.onClick,onDragEnter:this.onDragEnter,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop}),this.props.children,f["default"].createElement("input",c({},i,_)))}}]),t}(f["default"].Component);v.defaultProps={disablePreview:!1,disableClick:!1,multiple:!0},v.propTypes={onDrop:f["default"].PropTypes.func,onDropAccepted:f["default"].PropTypes.func,onDropRejected:f["default"].PropTypes.func,onDragEnter:f["default"].PropTypes.func,onDragLeave:f["default"].PropTypes.func,children:f["default"].PropTypes.node,style:f["default"].PropTypes.object,activeStyle:f["default"].PropTypes.object,rejectStyle:f["default"].PropTypes.object,className:f["default"].PropTypes.string,activeClassName:f["default"].PropTypes.string,rejectClassName:f["default"].PropTypes.string,disablePreview:f["default"].PropTypes.bool,disableClick:f["default"].PropTypes.bool,inputProps:f["default"].PropTypes.object,multiple:f["default"].PropTypes.bool,accept:f["default"].PropTypes.string,name:f["default"].PropTypes.string},t["default"]=v,e.exports=t["default"]},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";t.__esModule=!0,n(8),n(9),t["default"]=function(e,t){if(e&&t){var n=function(){var n=t.split(","),r=e.name||"",o=e.type||"",i=o.replace(/\/.*$/,"");return{v:n.some(function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?i===t.replace(/\/.*$/,""):o===t})}}();if("object"==typeof n)return n.v}return!0},e.exports=t["default"]},function(e,t){var n=e.exports={version:"1.2.2"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(2),o=n(1),i=n(4),a=n(19),s="prototype",c=function(e,t){return function(){return e.apply(t,arguments)}},u=function(e,t,n){var l,d,p,f,h=e&u.G,v=e&u.P,m=h?r:e&u.S?r[t]||(r[t]={}):(r[t]||{})[s],y=h?o:o[t]||(o[t]={});h&&(n=t);for(l in n)d=!(e&u.F)&&m&&l in m,p=(d?m:n)[l],f=e&u.B&&d?c(p,r):v&&"function"==typeof p?c(Function.call,p):p,m&&!d&&a(m,l,p),y[l]!=p&&i(y,l,f),v&&((y[s]||(y[s]={}))[l]=p)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,e.exports=u},function(e,t,n){var r=n(5),o=n(18);e.exports=n(22)?function(e,t,n){return r.setDesc(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(20)("wks"),o=n(2).Symbol;e.exports=function(e){return r[e]||(r[e]=o&&o[e]||(o||n(6))("Symbol."+e))}},function(e,t,n){n(26),e.exports=n(1).Array.some},function(e,t,n){n(25),e.exports=n(1).String.endsWith},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(10);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n(7)("match")]=!1,!"/./"[e](t)}catch(o){}}return!0}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(16),o=n(11),i=n(7)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(2),o=n(4),i=n(6)("src"),a="toString",s=Function[a],c=(""+s).split(a);n(1).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,a){"function"==typeof n&&(o(n,i,e[t]?""+e[t]:c.join(t+"")),"name"in n||(n.name=t)),e===r?e[t]=n:(a||delete e[t],o(e,t,n))})(Function.prototype,a,function(){return"function"==typeof this&&this[i]||s.call(this)})},function(e,t,n){var r=n(2),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(17),o=n(13);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return o(e)+""}},function(e,t,n){e.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(23),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=n(3),o=n(24),i=n(21),a="endsWith",s=""[a];r(r.P+r.F*n(14)(a),"String",{endsWith:function(e){var t=i(this,e,a),n=arguments,r=n.length>1?n[1]:void 0,c=o(t.length),u=void 0===r?c:Math.min(o(r),c),l=e+"";return s?s.call(t,l,u):t.slice(u-l.length,u)===l}})},function(e,t,n){var r=n(5),o=n(3),i=n(1).Array||Array,a={},s=function(e,t){r.each.call(e.split(","),function(e){void 0==t&&e in i?a[e]=i[e]:e in[]&&(a[e]=n(12)(Function.call,[][e],t))})};s("pop,reverse,shift,keys,values,entries",1),s("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),s("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),o(o.S,"Array",a);
}])},function(t,n){t.exports=e}])})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t["default"]=void 0;var s=n(6),c=n(14),u=r(c),l=n(15),d=(r(l),function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return s.Children.only(e)},t}(s.Component));t["default"]=d,d.propTypes={store:u["default"].isRequired,children:s.PropTypes.element.isRequired},d.childContextTypes={store:u["default"].isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function c(e,t){try{return e.apply(t)}catch(n){return S.value=n,S}}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=!!e,p=e||O,h=void 0;h="function"==typeof t?t:t?(0,y["default"])(t):E;var m=n||T,g=r.pure,b=void 0===g?!0:g,w=r.withRef,_=void 0===w?!1:w,k=b&&m!==T,R=x++;return function(e){function t(e,t,n){var r=m(e,t,n);return r}var n="Connect("+s(e)+")",r=function(r){function s(e,t){o(this,s);var a=i(this,r.call(this,e,t));a.version=R,a.store=e.store||t.store,(0,P["default"])(a.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var c=a.store.getState();return a.state={storeState:c},a.clearCache(),a}return a(s,r),s.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},s.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},s.prototype.configureFinalMapState=function(e,t){var n=p(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:p,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},s.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},s.prototype.configureFinalMapDispatch=function(e,t){var n=h(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:h,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},s.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return this.stateProps&&(0,v["default"])(e,this.stateProps)?!1:(this.stateProps=e,!0)},s.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return this.dispatchProps&&(0,v["default"])(e,this.dispatchProps)?!1:(this.dispatchProps=e,!0)},s.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return this.mergedProps&&k&&(0,v["default"])(e,this.mergedProps)?!1:(this.mergedProps=e,!0)},s.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},s.prototype.trySubscribe=function(){u&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},s.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},s.prototype.componentDidMount=function(){this.trySubscribe()},s.prototype.componentWillReceiveProps=function(e){b&&(0,v["default"])(e,this.props)||(this.haveOwnPropsChanged=!0)},s.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},s.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},s.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=c(this.updateStatePropsIfNeeded,this);if(!n)return;n===S&&(this.statePropsPrecalculationError=S.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},s.prototype.getWrappedInstance=function(){return(0,P["default"])(_,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},s.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,o=this.statePropsPrecalculationError,i=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,o)throw o;var a=!0,s=!0;b&&i&&(a=n||t&&this.doStatePropsDependOnOwnProps,s=t&&this.doDispatchPropsDependOnOwnProps);var c=!1,u=!1;r?c=!0:a&&(c=this.updateStatePropsIfNeeded()),s&&(u=this.updateDispatchPropsIfNeeded());var p=!0;return p=c||u||t?this.updateMergedPropsIfNeeded():!1,!p&&i?i:this.renderedElement=_?(0,d.createElement)(e,l({},this.mergedProps,{ref:"wrappedInstance"})):(0,d.createElement)(e,this.mergedProps)},s}(d.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:f["default"]},r.propTypes={store:f["default"]},(0,C["default"])(r,e)}}var l=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t["default"]=u;var d=n(6),p=n(14),f=r(p),h=n(50),v=r(h),m=n(51),y=r(m),g=n(15),b=(r(g),n(10)),w=(r(b),n(39)),C=r(w),_=n(40),P=r(_),O=function(e){return{}},E=function(e){return{dispatch:e}},T=function(e,t,n){return l({},n,e,t)},S={value:null},x=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;n.length>i;i++)if(!o.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}t.__esModule=!0,t["default"]=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,o.bindActionCreators)(e,t)}}t.__esModule=!0,t["default"]=r;var o=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var a=e(n,r,o),c=a.dispatch,u=[],l={getState:a.getState,dispatch:function(e){return c(e)}};return u=t.map(function(e){return e(l)}),c=s["default"].apply(void 0,u)(a.dispatch),i({},a,{dispatch:c})}}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=o;var a=n(16),s=r(a)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),o={},i=0;r.length>i;i++){var a=r[i],s=e[a];"function"==typeof s&&(o[a]=n(s,t))}return o}t.__esModule=!0,t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=t&&t.type,r=n&&'"'+n+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function i(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:s.ActionTypes.INIT});if(void 0===r)throw Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:o}))throw Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},r=0;t.length>r;r++){var a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}var s,c=Object.keys(n);try{i(n)}catch(u){s=u}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var r=!1,i={},a=0;c.length>a;a++){var u=c[a],l=n[u],d=e[u],p=l(d,t);if(void 0===p){var f=o(u,t);throw Error(f)}i[u]=p,r=r||p!==d}return r?i:e}}t.__esModule=!0,t["default"]=a;var s=n(17),c=n(10),u=(r(c),n(18));r(u)},function(e,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,n){(function(t){"use strict";e.exports=n(57)(t||window||this)}).call(t,function(){return this}())},function(e,t){"use strict";e.exports=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},function(e,t,n){var r,o,i;!function(n,a){o=[t],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();e.VanillaModal=function(){function e(n){t(this,e),this.$$={modal:".modal",modalInner:".modal-inner",modalContent:".modal-content",open:'[rel="modal:open"]',close:'[rel="modal:close"]',page:"body","class":"modal-visible",loadClass:"vanilla-modal",clickOutside:!0,closeKeys:[27],transitions:!0,transitionEnd:null,onBeforeOpen:null,onBeforeClose:null,onOpen:null,onClose:null},this._applyUserSettings(n),this.error=!1,this.isOpen=!1,this.current=null,this.open=this._open.bind(this),this.close=this._close.bind(this),this.$$.transitionEnd=this._transitionEndVendorSniff(),this.$=this._setupDomNodes(),this.error?console.error("Please fix errors before proceeding."):(this._addLoadedCssClass(),this._events().add())}return n(e,[{key:"_applyUserSettings",value:function(e){if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this.$$[t]=e[t])}},{key:"_transitionEndVendorSniff",value:function(){if(this.$$.transitions!==!1){var e=document.createElement("div"),t={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n]}}},{key:"_getNode",value:function(e,t){var n=t||document,r=n.querySelector(e);return r?r:(this.error=!0,console.error(e+" not found in document."))}},{key:"_setupDomNodes",value:function(){var e={};return e.modal=this._getNode(this.$$.modal),e.page=this._getNode(this.$$.page),e.modalInner=this._getNode(this.$$.modalInner,this.modal),e.modalContent=this._getNode(this.$$.modalContent,this.modal),e}},{key:"_addLoadedCssClass",value:function(){this._addClass(this.$.page,this.$$.loadClass)}},{key:"_addClass",value:function(e,t){if(e instanceof HTMLElement!=0){var n=e.className.split(" ");-1===n.indexOf(t)&&n.push(t),e.className=n.join(" ")}}},{key:"_removeClass",value:function(e,t){if(e instanceof HTMLElement!=0){var n=e.className.split(" ");n.indexOf(t)>-1&&n.splice(n.indexOf(t),1),e.className=n.join(" ")}}},{key:"_setOpenId",value:function(){var e=this.current.id||"anonymous";this.$.page.setAttribute("data-current-modal",e)}},{key:"_removeOpenId",value:function(){this.$.page.removeAttribute("data-current-modal")}},{key:"_getElementContext",value:function(e){return e&&"string"==typeof e.hash?document.querySelector(e.hash):"string"==typeof e?document.querySelector(e):console.error("No selector supplied to open()")}},{key:"_open",value:function(e,t){return this._releaseNode(),this.current=this._getElementContext(e),this.current instanceof HTMLElement==0?console.error("VanillaModal target must exist on page."):("function"==typeof this.$$.onBeforeOpen&&this.$$.onBeforeOpen.call(this,t),this._captureNode(),this._addClass(this.$.page,this.$$["class"]),this._setOpenId(),this.isOpen=!0,void("function"==typeof this.$$.onOpen&&this.$$.onOpen.call(this,t)))}},{key:"_detectTransition",value:function(){var e=window.getComputedStyle(this.$.modal,null),t=["transitionDuration","oTransitionDuration","MozTransitionDuration","webkitTransitionDuration"],n=t.filter(function(t){return"string"==typeof e[t]&&parseFloat(e[t])>0?!0:void 0});return!!n.length}},{key:"_close",value:function(e){if(this.isOpen===!0){this.isOpen=!1,"function"==typeof this.$$.onBeforeClose&&this.$$.onBeforeClose.call(this,e),this._removeClass(this.$.page,this.$$["class"]);var t=this._detectTransition();this.$$.transitions&&this.$$.transitionEnd&&t?this._closeModalWithTransition(e):this._closeModal(e)}}},{key:"_closeModal",value:function(e){this._removeOpenId(this.$.page),this._releaseNode(),this.isOpen=!1,this.current=null,"function"==typeof this.$$.onClose&&this.$$.onClose.call(this,e)}},{key:"_closeModalWithTransition",value:function(e){var t=function(){this.$.modal.removeEventListener(this.$$.transitionEnd,t),this._closeModal(e)}.bind(this);this.$.modal.addEventListener(this.$$.transitionEnd,t)}},{key:"_captureNode",value:function(){if(this.current)for(;this.current.childNodes.length>0;)this.$.modalContent.appendChild(this.current.childNodes[0])}},{key:"_releaseNode",value:function(){if(this.current)for(;this.$.modalContent.childNodes.length>0;)this.current.appendChild(this.$.modalContent.childNodes[0])}},{key:"_closeKeyHandler",value:function(e){"[object Array]"===Object.prototype.toString.call(this.$$.closeKeys)&&0!==this.$$.closeKeys.length&&this.$$.closeKeys.indexOf(e.which)>-1&&this.isOpen===!0&&(e.preventDefault(),this.close(e))}},{key:"_outsideClickHandler",value:function(e){if(this.$$.clickOutside===!0){for(var t=e.target;t&&t!=document.body;){if(t===this.$.modalInner)return;t=t.parentNode}this.close(e)}}},{key:"_matches",value:function(e,t){for(var n=e.target,r=(n.document||n.ownerDocument).querySelectorAll(t),o=0;r.length>o;o++)for(var i=n;i&&i!==document.body;){if(i===r[o])return i;i=i.parentNode}return null}},{key:"_delegateOpen",value:function(e){var t=this._matches(e,this.$$.open);return t?(e.preventDefault(),e.delegateTarget=t,this.open(t,e)):void 0}},{key:"_delegateClose",value:function(e){return this._matches(e,this.$$.close)?(e.preventDefault(),this.close(e)):void 0}},{key:"_events",value:function(){var e=this._closeKeyHandler.bind(this),t=this._outsideClickHandler.bind(this),n=this._delegateOpen.bind(this),r=this._delegateClose.bind(this),o=function(){this.$.modal.addEventListener("click",t,!1),document.addEventListener("keydown",e,!1),document.addEventListener("click",n,!1),document.addEventListener("click",r,!1)};return this.destroy=function(){this.close(),this.$.modal.removeEventListener("click",t),document.removeEventListener("keydown",e),document.removeEventListener("click",n),document.removeEventListener("click",r)},{add:o.bind(this)}}}]),e}()})},function(e,t,n){"use strict";!function(){var t=n(1).log,r=n(1).browserDetails;e.exports.browserDetails=r,e.exports.extractVersion=n(1).extractVersion,e.exports.disableLog=n(1).disableLog,n(1).disableLog(!0);var o=n(60)||null,i=n(63)||null,a=n(64)||null,s=n(66)||null;switch(r.browser){case"opera":case"chrome":if(!o||!o.shimPeerConnection)return void t("Chrome shim is not included in this adapter release.");t("adapter.js shimming chrome."),e.exports.browserShim=o,o.shimGetUserMedia(),o.shimSourceObject(),o.shimPeerConnection(),o.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void t("Firefox shim is not included in this adapter release.");t("adapter.js shimming firefox."),e.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!i||!i.shimPeerConnection)return void t("MS edge shim is not included in this adapter release.");t("adapter.js shimming edge."),e.exports.browserShim=i,i.shimPeerConnection();break;case"safari":if(!s)return void t("Safari shim is not included in this adapter release.");t("adapter.js shimming safari."),e.exports.browserShim=s,s.shimGetUserMedia();break;default:t("Unsupported browser!")}}()},function(e,t,n){"use strict";var r=n(1).log,o=n(1).browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),o=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return o(e,t);var a=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t};if(arguments.length>=2){var s=function(e){i[1](a(e))};return o.apply(this,[s,arguments[0]])}return new Promise(function(t,n){1===i.length&&"object"==typeof e?o.apply(r,[function(e){t.apply(null,[a(e)])},n]):o.apply(r,[t,n])})},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(1>arguments.length||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,o){t.apply(e,[r,o,n])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var n=arguments,r=this;return n[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(n[0]),new Promise(function(e,o){t.apply(r,[n[0],function(){e(),2>n.length||n[1].apply(null,[])},function(e){o(e),3>n.length||n[2].apply(null,[e])}])})}})},attachMediaStream:function(e,t){r("DEPRECATED, attachMediaStream will soon be removed."),43>o.version?void 0!==e.src?e.src=URL.createObjectURL(t):r("Error attaching stream to element."):e.srcObject=t},reattachMediaStream:function(e,t){r("DEPRECATED, reattachMediaStream will soon be removed."),43>o.version?e.src=t.src:e.srcObject=t.srcObject}};e.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:n(61),attachMediaStream:i.attachMediaStream,reattachMediaStream:i.reattachMediaStream}},function(e,t,n){"use strict";var r=n(1).log;e.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var i={};"number"==typeof r.ideal?(i[o("min",n)]=r.ideal,t.optional.push(i),i={},i[o("max",n)]=r.ideal,t.optional.push(i)):(i[o("",n)]=r.ideal,t.optional.push(i))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n,o){return t=JSON.parse(JSON.stringify(t)),t.audio&&(t.audio=e(t.audio)),t.video&&(t.video=e(t.video)),r("chrome: "+JSON.stringify(t)),navigator.webkitGetUserMedia(t,n,o)};navigator.getUserMedia=t;var n=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return t&&(r("spec:   "+JSON.stringify(t)),t.audio=e(t.audio),t.video=e(t.video),r("chrome: "+JSON.stringify(t))),o(t)}.bind(this)}else navigator.mediaDevices.getUserMedia=function(e){return n(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},function(e,t){"use strict";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;t.length>r;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;r.length>o;o++)t=r[o].trim().split("="),n[t[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+" "+e.parameter+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.getDtlsParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var o=r.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),i={role:"auto",fingerprints:[{algorithm:o.split(" ")[0],value:o.split(" ")[1]}]};return i},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var o={usernameFragment:r.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return o},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e),o=r[0].split(" "),i=3;o.length>i;i++){var a=o[i],s=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=n.parseRtpMap(s),u=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?n.parseFmtp(u[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";return r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}),r+="a=rtcp-mux\r\n"},n.parseRtpEncodingParameters=function(e){var t,r=[],o=n.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),o.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};r.push(n),i&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var l=n.matchPrefix(e,"b=");return l.length&&(0===l[0].indexOf("b=TIAS:")?l=parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")&&(l=parseInt(l[0].substr(5),10)),r.forEach(function(e){e.maxBitrate=l})),r},n.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,o){var i=n.writeRtpDescription(e.kind,t);if(i+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n"},n.getDirection=function(e,t){for(var r=n.splitLines(e),o=0;r.length>o;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return t?n.getDirection(t):"sendrecv"},e.exports=n},function(e,t,n){"use strict";var r=n(62),o=n(1).log,i={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",
this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}e&&e.iceServers&&(this.iceOptions.iceServers=e.iceServers.filter(function(e){return e&&e.urls?(e.urls=e.urls.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")})[0],!!e.urls):!1})),this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){var r=!n.candidate||0===Object.keys(n.candidate).length;if(r)for(var o=1;t.length>o;o++)-1===t[o].indexOf("\r\na=end-of-candidates\r\n")&&(t[o]+="a=end-of-candidates\r\n");else-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){var i=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});i&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;t.codecs.length>r;r++){var o=t.codecs[r];if(e.name.toLowerCase()===o.name.toLowerCase()&&e.clockRate===o.clockRate&&e.numChannels===o.numChannels){n.codecs.push(o);break}}}),e.headerExtensions.forEach(function(e){for(var r=0;t.headerExtensions.length>r;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,o=new RTCIceGatherer(n.iceOptions),i=new RTCIceTransport(o);o.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===o.state&&(o.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===i.component?2:1,s.candidate.candidate=r.writeCandidate(c));var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&l&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),l&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete");break;case"complete":}},i.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(i);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:o,iceTransport:i,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var o=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),n&&e.rtpReceiver&&(o.encodings=e.recvEncodingParameters,o.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,o=this;switch("offer"===e.type?this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);o._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer):"answer"===e.type&&(t=r.splitSections(o.remoteDescription.sdp),n=t.shift(),t.forEach(function(e,t){var i=o.transceivers[t],a=i.iceGatherer,s=i.iceTransport,c=i.dtlsTransport,u=i.localCapabilities,l=i.remoteCapabilities,d="0"===e.split("\n",1)[0].split(" ",2)[1];if(!d){var p=r.getIceParameters(e,n);s.start(a,p,"controlled");var f=r.getDtlsParameters(e,n);c.start(f);var h=o._getCommonCapabilities(u,l);o._transceive(i,h.codecs.length>0,!1)}})),this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var i=arguments.length>1&&"function"==typeof arguments[1];if(i){var a=arguments[1];window.setTimeout(function(){a(),"new"===o.iceGatheringState&&(o.iceGatheringState="gathering"),o._emitBufferedCandidates()},0)}var s=Promise.resolve();return s.then(function(){i||("new"===o.iceGatheringState&&(o.iceGatheringState="gathering"),window.setTimeout(o._emitBufferedCandidates.bind(o),500))}),s},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,o=[],i=r.splitSections(e.sdp),a=i.shift();switch(i.forEach(function(i,s){var c,u,l,d,p,f,h,v,m,y,g,b,w=r.splitLines(i),C=w[0].substr(2).split(" "),_=C[0],P="0"===C[1],O=r.getDirection(i,a),E=r.parseRtpParameters(i);P||(g=r.getIceParameters(i,a),b=r.getDtlsParameters(i,a)),v=r.parseRtpEncodingParameters(i);var T=r.matchPrefix(i,"a=mid:");T=T.length?T[0].substr(6):r.generateIdentifier();var S,x=r.matchPrefix(i,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];x&&(S=x.value);var k=r.matchPrefix(i,"a=end-of-candidates").length>0,R=r.matchPrefix(i,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||P)"answer"!==e.type||P||(c=t.transceivers[s],u=c.iceGatherer,l=c.iceTransport,d=c.dtlsTransport,p=c.rtpSender,f=c.rtpReceiver,h=c.sendEncodingParameters,m=c.localCapabilities,t.transceivers[s].recvEncodingParameters=v,t.transceivers[s].remoteCapabilities=E,t.transceivers[s].cname=S,k&&l.setRemoteCandidates(R),l.start(u,g,"controlling"),d.start(b),t._transceive(c,"sendrecv"===O||"recvonly"===O,"sendrecv"===O||"sendonly"===O),!f||"sendrecv"!==O&&"sendonly"!==O?delete c.rtpReceiver:(y=f.track,o.push([y,f]),n.addTrack(y)));else{var j=t._createIceAndDtlsTransports(T,s);if(k&&j.iceTransport.setRemoteCandidates(R),m=RTCRtpReceiver.getCapabilities(_),h=[{ssrc:1001*(2*s+2)}],f=new RTCRtpReceiver(j.dtlsTransport,_),y=f.track,o.push([y,f]),n.addTrack(y),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=s){var M=t.localStreams[0].getTracks()[s];p=new RTCRtpSender(M,j.dtlsTransport)}t.transceivers[s]={iceGatherer:j.iceGatherer,iceTransport:j.iceTransport,dtlsTransport:j.dtlsTransport,localCapabilities:m,remoteCapabilities:E,rtpSender:p,rtpReceiver:f,kind:_,mid:T,cname:S,sendEncodingParameters:h,recvEncodingParameters:v},t._transceive(t.transceivers[s],!1,"sendrecv"===O||"sendonly"===O)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),o.forEach(function(r){var o=r[0],i=r[1],a=new Event("track");a.track=o,a.receiver=i,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n["new"]>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],o=0,i=0;if(this.localStreams.length&&(o=this.localStreams[0].getAudioTracks().length,i=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(o=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(i=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?o>0:i>0}),"audio"===e.kind?o--:"video"===e.kind&&i--});o>0||i>0;)o>0&&(n.push({kind:"audio",wantReceive:!0}),o--),i>0&&(n.push({kind:"video",wantReceive:!0}),i--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var o,i,c=t.track,u=t.kind,l=r.generateIdentifier(),d=e._createIceAndDtlsTransports(l,n),p=RTCRtpSender.getCapabilities(u),f=[{ssrc:1001*(2*n+1)}];c&&(o=new RTCRtpSender(c,d.dtlsTransport)),t.wantReceive&&(i=new RTCRtpReceiver(d.dtlsTransport,u)),s[n]={iceGatherer:d.iceGatherer,iceTransport:d.iceTransport,dtlsTransport:d.dtlsTransport,localCapabilities:p,remoteCapabilities:null,rtpSender:o,rtpReceiver:i,kind:u,mid:l,sendEncodingParameters:f,recvEncodingParameters:null};var h=s[n];a+=r.writeMediaSection(h,h.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.transceivers.forEach(function(n){var o=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,o,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;this.transceivers.length>n;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var o=this.transceivers[t];if(o){var i=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===i.protocol&&0===i.port)return;if("1"!==i.component)return;"endOfCandidates"===i.type&&(i={}),o.iceTransport.addRemoteCandidate(i);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(i.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r={};Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}},attachMediaStream:function(e,t){o("DEPRECATED, attachMediaStream will soon be removed."),e.srcObject=t},reattachMediaStream:function(e,t){o("DEPRECATED, reattachMediaStream will soon be removed."),e.srcObject=t.srcObject}};e.exports={shimPeerConnection:i.shimPeerConnection,attachMediaStream:i.attachMediaStream,reattachMediaStream:i.reattachMediaStream}},function(e,t,n){"use strict";var r=n(1).log,o=n(1).browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(38>o.version&&e&&e.iceServers){for(var n=[],r=0;e.iceServers.length>r;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var a=0;i.urls.length>a;a++){var s={url:i.urls[a]};0===i.urls[a].indexOf("turn")&&(s.username=i.username,s.credential=i.credential),n.push(s)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}})},shimGetUserMedia:function(){var e=function(e,t,n){var i=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};o[n]="number"==typeof r.ideal?{min:r.ideal,max:r.ideal}:r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),38>o.version&&(r("spec: "+JSON.stringify(e)),e.audio&&(e.audio=i(e.audio)),e.video&&(e.video=i(e.video)),r("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)};navigator.getUserMedia=e;var t=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:t,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},41>o.version){var n=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return n().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}},attachMediaStream:function(e,t){r("DEPRECATED, attachMediaStream will soon be removed."),e.srcObject=t},reattachMediaStream:function(e,t){r("DEPRECATED, reattachMediaStream will soon be removed."),e.srcObject=t.srcObject}};e.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:n(65),attachMediaStream:i.attachMediaStream,reattachMediaStream:i.reattachMediaStream}},function(e,t,n){"use strict";var r=n(1).log,o=n(1).browserDetails;e.exports=function(){var e=function(e,t,n){var i=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};o[n]="number"==typeof r.ideal?{min:r.ideal,max:r.ideal}:r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),38>o.version&&(r("spec: "+JSON.stringify(e)),e.audio&&(e.audio=i(e.audio)),e.video&&(e.video=i(e.video)),r("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)};navigator.getUserMedia=e;var t=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:t,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},41>o.version){var n=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return n().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}},function(e,t){"use strict";var n={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.exports={shimGetUserMedia:n.shimGetUserMedia}}])});
//# sourceMappingURL=onfido.min.js.map