/* Onfido SDK 6.2.0 */
(window.webpackJsonpOnfido=window.webpackJsonpOnfido||[]).push([[5],{697:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return he}));var a=n(29),r=n.n(a),s=n(30),o=n.n(s),i=n(18),u=n.n(i),c=n(15),p=n.n(c),l=n(19),f=n.n(l),h=n(17),d=n.n(h),b=n(20),m=n.n(b),v=n(16),w=n.n(v),S=n(3),k=n.n(S),B=n(21),j=n.n(B),C=n(448),I=n.n(C),O=n(93),x=n.n(O),y=n(105),g=n.n(y),D=n(442),E=n.n(D),M=n(55),T=n.n(M),V=n(319),U=n.n(V),F=n(669),R=n.n(F),_=n(394),A=n.n(_),L=n(5),W=n.n(L),J=n(7),P=n.n(J),q=n(12),z=n.n(q),G=n(2),H=n.n(G),K=n(8),N=n.n(K),Q=n(11),X=n.n(Q),Y=n(4),Z=n.n(Y),$=n(1),ee=n.n($),te=n(0),ne=n(183),ae=n(86),re=n(184),se=n(70),oe=n(297),ie=n(185),ue=n(122),ce=n(675),pe=n.n(ce);function le(e,t){var n=w()(e);if(m.a){var a=m()(e);t&&(a=d()(a).call(a,(function(t){return f()(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n,a=null!=arguments[t]?arguments[t]:{};if(t%2)p()(n=le(Object(a),!0)).call(n,(function(t){ee()(e,t,a[t])}));else if(u.a)o()(e,u()(a));else{var s;p()(s=le(Object(a))).call(s,(function(t){r()(e,t,f()(a,t))}))}}return e}var he=function(e){N()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!k.a)return!1;if(k.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(k()(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Z()(e);if(t()){var r=Z()(this).constructor;n=k()(a,arguments,r)}else n=a.apply(this,arguments);return X()(this,n)}}(n);function n(){var e,a;P()(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=t.call.apply(t,W()(e=[this]).call(e,s)),ee()(H()(a),"webcam",null),ee()(H()(a),"snapshotIntervalId",null),ee()(H()(a),"initialSnapshotTimeoutId",null),ee()(H()(a),"recorder",null),ee()(H()(a),"state",{hasBecomeInactive:!1,hasCameraError:!1,snapshotBuffer:[],isCaptureButtonDisabled:!0}),ee()(H()(a),"handleTimeout",(function(){return a.setState({hasBecomeInactive:!0})})),ee()(H()(a),"handleCameraError",(function(){return a.setState({hasCameraError:!0,isCaptureButtonDisabled:!0})})),ee()(H()(a),"handleSelfie",function(){var e=A()(U.a.mark((function e(t,n){var r,s,o,i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={blob:t,sdkMetadata:n,filename:"applicant_selfie.".concat(Object(ae.e)(t))},!a.props.useSnapshotsVideo){e.next=7;break}return e.next=4,a.snapshotsToWebmVideo().then((function(e){var t=new Blob([e.MEMFS[0].data]);return R.a.createObjectURL(t)}));case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:s=e.t0,o=a.state.snapshotBuffer[0]||a.state.snapshotBuffer[1],i=a.props.useMultipleSelfieCapture?fe(fe({snapshot:o},r),{},{snapshotsVideoUrl:s}):r,a.props.onCapture(i),a.setState({isCaptureButtonDisabled:!1});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ee()(H()(a),"handleSnapshotForVideo",(function(e){e&&e.length>=1&&a.setState((function(t){var n;return{snapshotBuffer:W()(n=[]).call(n,T()(t.snapshotBuffer),[{name:"applicant_snapshot_".concat(t.snapshotBuffer.length+1,".jpeg"),data:e}])}}))})),ee()(H()(a),"snapshotsToWebmVideo",A()(U.a.mark((function e(){var t,n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.sleep(5e3),e.next=3,a.recorder.stop();case 3:return t=e.sent,e.next=6,fetch(t).then((function(e){return e.arrayBuffer()}));case 6:return n=e.sent,e.abrupt("return",new E.a((function(e){var t;e(pe()({MEMFS:W()(t=[]).call(t,T()(a.state.snapshotBuffer),[{name:"audio.wav",data:n}]),stdin:function(){},arguments:["-framerate","1","-start_number","1","-i","applicant_snapshot_%d.jpeg","-i","audio.wav","-r","10","-c:v","libvpx","-shortest","out2.webm"]}))})));case 8:case"end":return e.stop()}}),e)})))),ee()(H()(a),"handleSnapshot",(function(e){a.setState((function(t){return{snapshotBuffer:[g()(t.snapshotBuffer,2)[1],{blob:e,filename:"applicant_snapshot.".concat(Object(ae.e)(e))}]}}))})),ee()(H()(a),"takeSnapshot",(function(){if(a.props.useSnapshotsVideo)return a.webcam&&Object(ne.b)(a.webcam,a.handleSnapshotForVideo);a.webcam&&Object(ne.c)(a.webcam,a.handleSnapshot,"image/jpeg")})),ee()(H()(a),"takeSelfie",(function(){a.setState({isCaptureButtonDisabled:!0}),Object(ne.c)(a.webcam,a.handleSelfie)})),ee()(H()(a),"sleep",(function(e){return new E.a((function(t){return x()(t,e)}))})),ee()(H()(a),"initAudioRecording",A()(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new E.a((function(e){var t=[],n=new window.MediaRecorder(a.webcam.stream);n.ondataavailable=function(e){return t.push(e.data)};e({start:function(){return n.start()},stop:function(){return new E.a((function(e){n.addEventListener("stop",(function(){var n=new File(t,{name:"audio.wav",type:" audio/wav"}),a=R.a.createObjectURL(n);e(a)})),n.stop()}))}})})));case 1:case"end":return e.stop()}}),e)})))),ee()(H()(a),"onUserMedia",A()(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.useMultipleSelfieCapture){e.next=11;break}if(750,a.initialSnapshotTimeoutId=x()((function(){a.takeSnapshot(),a.setState({isCaptureButtonDisabled:!1})}),750),a.snapshotIntervalId=I()(a.takeSnapshot,a.props.snapshotInterval),!a.props.useSnapshotsVideo){e.next=9;break}return e.next=7,a.initAudioRecording();case 7:a.recorder=e.sent,a.recorder.start();case 9:e.next=12;break;case 11:a.setState({isCaptureButtonDisabled:!1});case 12:case"end":return e.stop()}}),e)})))),a}return z()(n,[{key:"componentWillUnmount",value:function(){this.snapshotIntervalId&&clearInterval(this.snapshotIntervalId),this.initialSnapshotTimeoutId&&clearTimeout(this.initialSnapshotTimeoutId)}},{key:"render",value:function(){var e=this,t=this.props,n=t.trackScreen,a=t.renderFallback,r=t.inactiveError,s=this.state,o=s.hasBecomeInactive,i=s.hasCameraError,u=s.isCaptureButtonDisabled;return Object(te.h)(ie.a,j()({},this.props,{webcamRef:function(t){return e.webcam=t},onUserMedia:this.onUserMedia,onError:this.handleCameraError,shouldUseAudio:!!this.props.useSnapshotsVideo,renderError:o?Object(te.h)(ue.a,j()({trackScreen:n,renderFallback:a},{error:r,isDismissible:!0})):null,buttonType:"photo",onButtonClick:this.takeSelfie,isButtonDisabled:u}),!u&&!i&&Object(te.h)(oe.a,{seconds:10,onTimeout:this.handleTimeout}),Object(te.h)(se.a,null),Object(te.h)(re.b,null))}}]),n}(te.Component)}}]);